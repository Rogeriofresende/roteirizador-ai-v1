{"version":3,"names":["cov_l21jgjjw0","actualCoverage","APIFallbackManager","constructor","f","s","fallbackStrategies","addFallback","strategy","push","executeWithFallbacks","primaryOperation","operationName","primaryError","console","warn","i","length","log","fallbackError","Error","exports","setupScriptGenerationFallbacks","fallbackManager","__awaiter","cached","getCachedScript","b","generateTemplateScript","script","error","localStorage","getItem","parsedCache","JSON","parse","hourAgo","Date","now","timestamp"],"sources":["/Users/rogerioresende/Desktop/Roteirar-ia/src/services/apiFallbackManager.ts"],"sourcesContent":["// Fallback system for API failures\nexport class APIFallbackManager {\n  private fallbackStrategies: Array<() => Promise<any>> = [];\n  \n  addFallback(strategy: () => Promise<any>): void {\n    this.fallbackStrategies.push(strategy);\n  }\n  \n  async executeWithFallbacks<T>(\n    primaryOperation: () => Promise<T>,\n    operationName: string\n  ): Promise<T> {\n    try {\n      return await primaryOperation();\n    } catch (primaryError) {\n      console.warn(`${operationName} primary operation failed:`, primaryError);\n      \n      for (let i = 0; i < this.fallbackStrategies.length; i++) {\n        try {\n          console.log(`Attempting fallback ${i + 1} for ${operationName}`);\n          return await this.fallbackStrategies[i]();\n        } catch (fallbackError) {\n          console.warn(`Fallback ${i + 1} failed:`, fallbackError);\n        }\n      }\n      \n      throw new Error(`${operationName} failed - all fallbacks exhausted`);\n    }\n  }\n}\n\n// Example fallback strategies for script generation\nexport const setupScriptGenerationFallbacks = () => {\n  const fallbackManager = new APIFallbackManager();\n  \n  // Fallback 1: Use cached response\n  fallbackManager.addFallback(async () => {\n    const cached = getCachedScript();\n    if (cached) return cached;\n    throw new Error('No cached script available');\n  });\n  \n  // Fallback 2: Use template-based generation\n  fallbackManager.addFallback(async () => {\n    return generateTemplateScript();\n  });\n  \n  // Fallback 3: Return helpful error message\n  fallbackManager.addFallback(async () => {\n    return {\n      script: 'Serviço temporariamente indisponível. Tente novamente em alguns minutos.',\n      error: true\n    };\n  });\n  \n  return fallbackManager;\n};\n\n// Helper functions for fallbacks\nconst getCachedScript = (): string | null => {\n  try {\n    const cached = localStorage.getItem('last_generated_script');\n    if (cached) {\n      const parsedCache = JSON.parse(cached);\n      const hourAgo = Date.now() - (60 * 60 * 1000);\n      if (parsedCache.timestamp > hourAgo) {\n        return parsedCache.script;\n      }\n    }\n  } catch (error) {\n    console.warn('Error reading cached script:', error);\n  }\n  return null;\n};\n\nconst generateTemplateScript = (): string => {\n  return `\n# Roteiro Template\n\n## Introdução\nOlá! Bem-vindos ao nosso conteúdo sobre [ASSUNTO].\n\n## Desenvolvimento\nHoje vamos explorar os principais pontos:\n- Ponto 1: [DETALHE]\n- Ponto 2: [DETALHE]\n- Ponto 3: [DETALHE]\n\n## Conclusão\nEspero que tenham gostado! Não esqueçam de curtir e compartilhar.\n\n---\n*Este é um roteiro template gerado automaticamente. Para conteúdo personalizado, configure sua API key do Gemini.*\n`;\n}; "],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}